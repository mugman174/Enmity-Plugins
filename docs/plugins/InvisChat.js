window.enmity.modules.common.Constants,window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native,window.enmity.modules.common.React,window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const g=window.enmity.modules.common.Toasts;window.enmity.modules.common.Dialog,window.enmity.modules.common.Token;const h=window.enmity.modules.common.REST;window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking,window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes;function b(e){window.enmity.plugins.registerPlugin(e)}var x="InvisChat",B="0.0.1",M="Hide secret messages within normal messages",D=[{name:"mugman",id:"990032448115073064"}],N={name:x,version:B,description:M,authors:D};function c(e,n,s,o){window.enmity.clyde.sendReply(e,n,s,o)}var y;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.Guild=1]="Guild",e[e.DM=2]="DM"})(y||(y={}));var u;(function(e){e[e.Chat=1]="Chat",e[e.User=2]="User",e[e.Message=3]="Message"})(u||(u={}));var l;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.BuiltInText=1]="BuiltInText",e[e.BuiltInIntegration=2]="BuiltInIntegration",e[e.Bot=3]="Bot",e[e.Placeholder=4]="Placeholder"})(l||(l={}));var S;(function(e){e[e.Role=1]="Role",e[e.User=2]="User"})(S||(S={}));var d;(function(e){e[e.SubCommand=1]="SubCommand",e[e.SubCommandGroup=2]="SubCommandGroup",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.User=6]="User",e[e.Channel=7]="Channel",e[e.Role=8]="Role",e[e.Mentionnable=9]="Mentionnable",e[e.Number=10]="Number",e[e.Attachment=11]="Attachment"})(d||(d={}));var f;(function(e){e[e.ApplicationCommand=2]="ApplicationCommand",e[e.MessageComponent=3]="MessageComponent"})(f||(f={}));const E={id:"invischat",name:"invis",displayName:"invis",description:"Invisible Chat",displayDescription:"Invisible Chat",type:u.Chat,inputType:l.BuiltInText,options:[{name:"text",displayName:"text",description:"Text to encode",displayDescription:"Text to encode",type:d.String,required:!0},{name:"cover",displayName:"cover",description:"message that everyone will see to cover the hidden text",displayDescription:"message that everyone will see to cover the hidden text",type:d.String,required:!0},{name:"password",displayName:"password",description:"The password to use (default: passowrd)",type:d.String,required:!1}],execute:async function(e,n){var s,o;let t=e.find(m=>m.name=="text").value,i=e.find(m=>m.name=="cover").value,a=((s=e.find(m=>m.name=="password"))==null?void 0:s.value)||"password",r=(o=(await h.post({url:"https://invis.mugman.ga",body:{type:"hide",password:a,cover:i,secret:t}})).body)==null?void 0:o.response;return r?{content:r}:(c(n.channel.id,"Failed"),{})}},I={id:"invischatdecode",name:"decode",displayName:"decode",description:"Decode Invisible Chat",displayDescription:"Decode Invisible Chat",type:u.Chat,inputType:l.BuiltInText,options:[{name:"text",displayName:"text",description:"Text to decode",displayDescription:"Text to decode",type:d.String,required:!0},{name:"password",displayName:"password",description:"The password to use (default: passowrd)",type:d.String,required:!1}],execute:async function(e,n){var s,o;let t=e.find(r=>r.name=="text").value,i=((s=e.find(r=>r.name=="password"))==null?void 0:s.value)||"password",a=(o=(await h.post({url:"https://invis.mugman.ga",body:{type:"reveal",password:i,secret:t}})).body)==null?void 0:o.response;if(!a)return c(n.channel.id,"Failed"),{};await c(n.channel.id,a)}},R=[E,I];function _(...e){return window.enmity.modules.getByProps(...e)}window.enmity.modules.common;function G(e){return window.enmity.patcher.create(e)}const w=_("_currentDispatchActionType","_subscriptions","_waitQueue"),v=G("invis-chat"),U={...N,commands:[],onStart(){this.commands=R;const e=new RegExp(/( \u200c|\u200d |[\u2060-\u2064])[^\u200b]/);w.dispatch({type:"LOAD_MESSAGES"});const n=()=>{try{const s=w._actionHandlers._orderedActionHandlers.MESSAGE_CREATE.find(t=>t.name==="MessageStore"),o=w._actionHandlers._orderedActionHandlers.LOAD_MESSAGES_SUCCESS.find(t=>t.name==="MessageStore");v.before(s,"actionHandler",(t,i)=>{i[0].message.content.match(e)&&(i[0].message.content+=" [:lock:]")}),v.before(o,"actionHandler",(t,i)=>{i[0].message.content.match(e)&&(i[0].message.content+=" `[:lock:]`")}),console.log("Success"),g.open({content:"Invisible Chat has started"})}catch{g.open({content:"Invisible Chat - Trying Again"}),setTimeout(n,300)}};n()},onStop(){v.unpatchAll()}};b(U);
